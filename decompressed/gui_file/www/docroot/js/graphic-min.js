function Line(d){this.jg=new jsGraphics(d);this.start_x=50;this.y_str_width=40;this.x_str_tom=10;this.start_y=20;this.width=800;this.height=300;this.y_line_num=5;this.x_line_len=144;this.IsDrawArrow=!1;this.ArrowLength=6;this.drawXYLine=function(c,a,f){var b=a.length,e=0;if(c.length!=b)alert("X and Y length of inconsistencies, errors parameters.");else{var g=Math.round(this.height/this.y_line_num);c=Math.round(this.width/b);c-=0.5;this.jg.drawLine(this.start_x,this.start_y+this.height,this.start_x+
this.width,this.start_y+this.height);this.jg.drawLine(this.start_x,this.start_y+this.height,this.start_x,this.start_y);this.jg.setStroke(Stroke.DOTTED);var m=f.match(/\d+/g),d=m/this.y_line_num;f=f.match(/\D+/g);var l=0;1E3<parseInt(m)?l=15:100<parseInt(m)&&(l=10);for(m=0;m<this.y_line_num;m++){var h=this.start_y+this.height-(m+1)*g;this.jg.drawLine(this.start_x,h,this.start_x+this.width,h);var q=Math.round(d*(m+1)+0)+" "+f;this.jg.drawString(q,this.start_x-this.y_str_width-l,h-10)}for(m=b-1;0<=m;m--){this.jg.setStroke(1);
this.jg.setColor("#000000");g=this.start_x+c*(m+1);if(m==b-1||m>=b-3&&4>b||3==e&&55>=b||6==e&&100>b||12==e&&m<b-1)e=0,this.jg.drawLine(g,this.start_y+this.height,g,this.start_y+this.height-4),this.jg.drawString(a[m],g,this.start_y+this.height+10);e++}this.IsDrawArrow&&(this.jg.setStroke(1),this.jg.setColor("#000000"),this.jg.drawLine(this.start_x-this.ArrowLength,this.start_y,this.start_x,this.start_y-2*this.ArrowLength),this.jg.drawLine(this.start_x+this.ArrowLength,this.start_y,this.start_x,this.start_y-
2*this.ArrowLength),this.jg.drawLine(this.start_x,this.start_y,this.start_x,this.start_y-2*this.ArrowLength),this.jg.drawLine(this.start_x+this.width,this.start_y+this.height-this.ArrowLength,this.start_x+this.width+2*this.ArrowLength,this.start_y+this.height),this.jg.drawLine(this.start_x+this.width,this.start_y+this.height+this.ArrowLength,this.start_x+this.width+2*this.ArrowLength,this.start_y+this.height),this.jg.drawLine(this.start_x+this.width,this.start_y+this.height,this.start_x+this.width+
2*this.ArrowLength,this.start_y+this.height));this.jg.paint()}};this.drawTrafficLine=function(c,a,f,b){var e=c.length;a=a.length;if(e!=a)alert("X and Y length of inconsistencies, errors parameters.");else{Math.round(this.height/this.y_line_num);a=Math.round(this.width/a);for(a-=0.5;0<e;e--){this.jg.setStroke(2);this.jg.setColor(f);var g=this.start_x+a*e,d=this.start_x+a*(e-1),k=Math.round(this.height-this.height*(c[e-1]-0)/b+this.start_y),l=Math.round(this.height-this.height*(c[e-2]-0)/b+this.start_y);
1==e&&(l=this.height+this.start_y);this.jg.drawLine(g,k,d,l)}this.jg.paint()}};this.clearLine=function(){this.jg.clear()}}function getMaxVal(d){for(var c=5120,a=0;a<d.length;a++)d[a]>c&&(c=d[a]);return c}function getMaxValToShow(d){var c=Math.round(d/1024),a="KB";5242880<d&&(c=Math.round(d/1048576),a="MB");5>c&&(c=5);return c+a}
function drawLineDiv(d,c,a){var f=[],b=[];d=d.split(",");c=c.split(",");for(var e=d.length,g=0;g<e;g++)f[e-g-1]=getXTime(g),b[g]=parseInt(d[g])+parseInt(c[g]);var e=getMaxVal(b),g=getMaxValToShow(e),m=document.getElementById("greenLine").checked,k=document.getElementById("redLine").checked,l=document.getElementById("blueLine").checked;a=new Line(a+"LineDiv");a.drawXYLine(b,f,g);m&&a.drawTrafficLine(d,f,"green",e);l&&a.drawTrafficLine(c,f,"blue",e);k&&a.drawTrafficLine(b,f,"red",e);return a}
function getXTime(d){var c=new Date;0!=parseInt(d)&&(c=c.getTime()-6E5*parseInt(d),c=new Date(c));d=c.getHours();10>d&&(d="0"+d);var a=c.getMinutes();10>a&&(a="0"+a);c.getDay();return d+":"+a}var jg_ok,jg_ie,jg_fast,jg_dom,jg_moz;
function _chkDHTM(d,c,a){jg_ie=(c=d.document.body||null)&&"undefined"!=typeof c.insertAdjacentHTML&&d.document.createElement;jg_dom=c&&!jg_ie&&"undefined"!=typeof c.appendChild&&"undefined"!=typeof d.document.createRange&&"undefined"!=typeof(a=d.document.createRange()).setStartBefore&&"undefined"!=typeof a.createContextualFragment;jg_fast=jg_ie&&d.document.all&&!d.opera;jg_moz=jg_dom&&"undefined"!=typeof c.style.MozOpacity;jg_ok=!(!jg_ie&&!jg_dom)}
function _pntCnvDom(){var d=this.wnd.document.createRange();d.setStartBefore(this.cnv);d=d.createContextualFragment(jg_fast?this._htmRpc():this.htm);this.cnv&&this.cnv.appendChild(d);this.htm=""}function _pntCnvIe(){this.cnv&&this.cnv.insertAdjacentHTML("BeforeEnd",jg_fast?this._htmRpc():this.htm);this.htm=""}function _pntDoc(){this.wnd.document.write(jg_fast?this._htmRpc():this.htm);this.htm=""}function _pntN(){}
function _mkDiv(d,c,a,f){this.htm+='\x3cdiv style\x3d"position:absolute;left:'+d+"px;top:"+c+"px;width:"+a+"px;height:"+f+"px;clip:rect(0,"+a+"px,"+f+"px,0);background-color:"+this.color+(!jg_moz?";overflow:hidden":"")+';"\x3e\x3c/div\x3e'}function _mkDivIe(d,c,a,f){this.htm+="%%"+this.color+";"+d+";"+c+";"+a+";"+f+";"}
function _mkDivPrt(d,c,a,f){this.htm+='\x3cdiv style\x3d"position:absolute;border-left:'+a+"px solid "+this.color+";left:"+d+"px;top:"+c+"px;width:0px;height:"+f+"px;clip:rect(0,"+a+"px,"+f+"px,0);background-color:"+this.color+(!jg_moz?";overflow:hidden":"")+';"\x3e\x3c/div\x3e'}var _regex=/%%([^;]+);([^;]+);([^;]+);([^;]+);([^;]+);/g;
function _htmRpc(){return this.htm.replace(_regex,'\x3cdiv style\x3d"overflow:hidden;position:absolute;background-color:$1;left:$2px;top:$3px;width:$4px;height:$5px"\x3e\x3c/div\x3e\n')}function _htmPrtRpc(){return this.htm.replace(_regex,'\x3cdiv style\x3d"overflow:hidden;position:absolute;background-color:$1;left:$2px;top:$3px;width:$4px;height:$5px;border-left:$4px solid $1"\x3e\x3c/div\x3e\n')}
function _mkLin(d,c,a,f){if(d>a){var b=a,e=f;a=d;f=c;d=b;c=e}var b=a-d,e=Math.abs(f-c),g=c,m=c>f?-1:1;if(b>=e){var k=e<<1,l=k-(b<<1),h=k-b;for(c=d;0<b;)--b,++d,0<h?(this._mkDiv(c,g,d-c,1),g+=m,h+=l,c=d):h+=k;this._mkDiv(c,g,a-c+1,1)}else if(k=b<<1,l=k-(e<<1),h=k-e,b=g,f<=c){for(;0<e;)--e,0<h?(this._mkDiv(d++,g,1,b-g+1),g+=m,h+=l,b=g):(g+=m,h+=k);this._mkDiv(a,f,1,b-f+1)}else{for(;0<e;)--e,g+=m,0<h?(this._mkDiv(d++,b,1,g-b),h+=l,b=g):h+=k;this._mkDiv(a,b,1,f-b+1)}}
function _mkLin2D(d,c,a,f){if(d>a){var b=a,e=f;a=d;f=c;d=b;c=e}var b=a-d,e=Math.abs(f-c),g=c,m=c>f?-1:1,k=this.stroke;if(b>=e){if(0<b&&0<k-3)var l=(k*b*Math.sqrt(1+e*e/(b*b))-b-(k>>1)*e)/b,l=(!(k-4)?Math.ceil(l):Math.round(l))+1;else l=k;var k=Math.ceil(k/2),h=e<<1,q=h-(b<<1),n=h-b;for(c=d;0<b;)--b,++d,0<n?(this._mkDiv(c,g,d-c+k,l),g+=m,n+=q,c=d):n+=h;this._mkDiv(c,g,a-c+k+1,l)}else if(0<k-3?(l=(k*e*Math.sqrt(1+b*b/(e*e))-(k>>1)*b-e)/e,l=(!(k-4)?Math.ceil(l):Math.round(l))+1):l=k,k=Math.round(k/2),
h=b<<1,q=h-(e<<1),n=h-e,b=g,f<=c){for(++k;0<e;)--e,0<n?(this._mkDiv(d++,g,l,b-g+k),g+=m,n+=q,b=g):(g+=m,n+=h);this._mkDiv(a,f,l,b-f+k)}else{for(;0<e;)--e,g+=m,0<n?(this._mkDiv(d++,b,l,g-b+k),n+=q,b=g):n+=h;this._mkDiv(a,b,l,f-b+k+1)}}
function _mkLinDott(d,c,a,f){if(d>a){var b=a,e=f;a=d;f=c;d=b;c=e}a-=d;b=Math.abs(f-c);e=c;c=c>f?-1:1;f=!0;if(a>=b)for(var g=b<<1,m=g-(a<<1),k=g-a;0<a;)--a,f&&this._mkDiv(d,e,1,1),f=!f,0<k?(e+=c,k+=m):k+=g,++d;else{g=a<<1;m=g-(b<<1);for(k=g-b;0<b;)--b,f&&this._mkDiv(d,e,1,1),f=!f,e+=c,0<k?(++d,k+=m):k+=g}f&&this._mkDiv(d,e,1,1)}
function _mkOv(d,c,a,f){var b=++a>>1,e=++f>>1;a&=1;f&=1;d+=b;c+=e;for(var g=0,m=e,k=0,l=e,h=b*b<<1,q=h<<1,n=e*e<<1,p=n<<1,t=(h>>1)*(1-(e<<1))+n,e=(n>>1)-h*((e<<1)-1),s,r;0<m;)0>t?(t+=n*((g<<1)+3),e+=p*++g):0>e?(t+=n*((g<<1)+3)-q*(m-1),e+=p*++g-h*((m--<<1)-3),s=g-k,r=l-m,s&2&&r&2?(this._mkOvQds(d,c,g-2,m+2,1,1,a,f),this._mkOvQds(d,c,g-1,m+1,1,1,a,f)):this._mkOvQds(d,c,g-1,l,s,r,a,f),k=g,l=m):(e-=h*((m<<1)-3),t-=q*--m);s=b-k+1;r=(l<<1)+f;m=c-l;this._mkDiv(d-b,m,s,r);this._mkDiv(d+k+a-1,m,s,r)}
function _mkOv2D(d,c,a,f){var b=this.stroke;a+=b+1;f+=b+1;var e=a>>1,g=f>>1,m=a&1,k=f&1;d+=e;c+=g;var l=0,h=g,q=e*e<<1,n=q<<1,p=g*g<<1,t=p<<1,s=(q>>1)*(1-(g<<1))+p,r=(p>>1)-q*((g<<1)-1);if(0>b-4&&(!(b-2)||0<a-51&&0<f-51)){for(var u=0;0<h;)0>s?(s+=p*((l<<1)+3),r+=t*++l):0>r?(s+=p*((l<<1)+3)-n*(h-1),r+=t*++l-q*((h--<<1)-3),a=l-u,f=g-h,a-1?(a=a+1+(b&1),f=b):f-1?(a=b,f+=1+(b&1)):a=f=b,this._mkOvQds(d,c,l-1,g,a,f,m,k),u=l,g=h):(r-=q*((h<<1)-3),s-=n*--h);this._mkDiv(d-e,c-g,b,(g<<1)+k);this._mkDiv(d+e+
m-b,c-g,b,(g<<1)+k)}else{a=a-(b<<1)>>1;var u=f-(b<<1)>>1,w=0,v=u,x=a*a<<1,y=x<<1,B=u*u<<1,C=B<<1,z=(x>>1)*(1-(u<<1))+B,A=(B>>1)-x*((u<<1)-1),b=[];f=[];a=[];b[0]=0;f[0]=g;for(a[0]=u-1;0<h;)0>s?(b[b.length]=l,f[f.length]=h,s+=p*((l<<1)+3),r+=t*++l):0>r?(b[b.length]=l,s+=p*((l<<1)+3)-n*(h-1),r+=t*++l-q*((h--<<1)-3),f[f.length]=h):(r-=q*((h<<1)-3),s-=n*--h),0<v&&(0>z?(z+=B*((w<<1)+3),A+=C*++w,a[a.length]=v-1):0>A?(z+=B*((w<<1)+3)-y*(v-1),A+=C*++w-x*((v--<<1)-3),a[a.length]=v-1):(A-=x*((v<<1)-3),z-=y*
--v,a[a.length-1]--));u=-m;h=a[0];q=b.length;for(n=0;n<q;n++)if("undefined"!=typeof a[n]){if(a[n]<h||f[n]<g)l=b[n],this._mkOvQds(d,c,l,g,l-u,g-h,m,k),u=l,g=f[n],h=a[n]}else l=b[n],this._mkDiv(d-l,c-g,1,(g<<1)+k),this._mkDiv(d+u+m,c-g,1,(g<<1)+k),u=l,g=f[n];this._mkDiv(d-e,c-g,1,(g<<1)+k);this._mkDiv(d+u+m,c-g,1,(g<<1)+k)}}
function _mkOvDott(d,c,a,f){var b=++a>>1,e=++f>>1;a&=1;f&=1;var g=f^1;d+=b;c+=e;for(var m=0,k=e,b=b*b<<1,l=b<<1,h=e*e<<1,q=h<<1,n=(b>>1)*(1-(e<<1))+h,e=(h>>1)-b*((e<<1)-1),p=!0;0<k;)0>n?(n+=h*((m<<1)+3),e+=q*++m):0>e?(n+=h*((m<<1)+3)-l*(k-1),e+=q*++m-b*((k--<<1)-3)):(e-=b*((k<<1)-3),n-=l*--k),p&&k>=g&&this._mkOvQds(d,c,m,k,1,1,a,f),p=!p}function _mkRect(d,c,a,f){var b=this.stroke;this._mkDiv(d,c,a,b);this._mkDiv(d+a,c,b,f);this._mkDiv(d,c+f,a+b,b);this._mkDiv(d,c+b,b,f-b)}
function _mkRectDott(d,c,a,f){this.drawLine(d,c,d+a,c);this.drawLine(d+a,c,d+a,c+f);this.drawLine(d,c+f,d+a,c+f);this.drawLine(d,c,d,c+f)}function jsgFont(){this.PLAIN="font-weight:normal;";this.BOLD="font-weight:bold;";this.ITALIC="font-style:italic;";this.BOLD_ITALIC=this.ITALIC_BOLD=this.ITALIC+this.BOLD}var Font=new jsgFont;function jsgStroke(){this.DOTTED=-1}var Stroke=new jsgStroke;
function jsGraphics(d,c){this.setColor=function(a){this.color=a.toLowerCase()};this.setStroke=function(a){this.stroke=a;a+1?(0<a-1?(this.drawLine=_mkLin2D,this._mkOv=_mkOv2D):(this.drawLine=_mkLin,this._mkOv=_mkOv),this.drawRect=_mkRect):(this.drawLine=_mkLinDott,this._mkOv=_mkOvDott,this.drawRect=_mkRectDott)};this.setPrintable=function(a){this.printable=a;jg_fast?(this._mkDiv=_mkDivIe,this._htmRpc=a?_htmPrtRpc:_htmRpc):this._mkDiv=a?_mkDivPrt:_mkDiv};this.setFont=function(a,f,b){this.ftFam=a;this.ftSz=
f;this.ftSty=b||Font.PLAIN};this.drawPolyline=this.drawPolyLine=function(a,f){for(var b=a.length-1;b;)--b,this.drawLine(a[b],f[b],a[b+1],f[b+1])};this.fillRect=function(a,f,b,e){this._mkDiv(a,f,b,e)};this.drawPolygon=function(a,f){this.drawPolyline(a,f);this.drawLine(a[a.length-1],f[a.length-1],a[0],f[0])};this.drawEllipse=this.drawOval=function(a,f,b,e){this._mkOv(a,f,b,e)};this.fillEllipse=this.fillOval=function(a,f,b,e){var g=b>>1,c=e>>1,d=b&1;e&=1;a+=g;f+=c;var l=0,h=c,q=c,n=g*g<<1,p=n<<1,t=c*
c<<1,s=t<<1,r=(n>>1)*(1-(c<<1))+t,c=(t>>1)-n*((c<<1)-1),u,w,v;if(b)for(;0<h;)0>r?(r+=t*((l<<1)+3),c+=s*++l):0>c?(r+=t*((l<<1)+3)-p*(h-1),u=a-l,w=(l<<1)+d,c+=s*++l-n*((h--<<1)-3),v=q-h,this._mkDiv(u,f-q,w,v),this._mkDiv(u,f+h+e,w,v),q=h):(c-=n*((h<<1)-3),r-=p*--h);this._mkDiv(a-g,f-q,b,(q<<1)+e)};this.fillArc=function(a,f,b,e,g,c){var d=b>>1,l=e>>1;b=b&1|(e&1)<<16;a+=d;f+=l;e=0;var h=l,q=e,n=h,p=d*d<<1,t=p<<1,s=l*l<<1,r=s<<1,u=(p>>1)*(1-(l<<1))+s,w=(s>>1)-p*((l<<1)-1),v=1<<(Math.floor((g%=360)/180)<<
3)|2<<(Math.floor((c%=360)/180)<<3)|(g>=c)<<16,x=Array(l+1),y=Array(l+1);g*=Math.PI/180;c*=Math.PI/180;q=a+Math.round(d*Math.cos(g));g=f+Math.round(-l*Math.sin(g));_mkLinVirt(x,a,f,q,g);d=a+Math.round(d*Math.cos(c));c=f+Math.round(-l*Math.sin(c));for(_mkLinVirt(y,a,f,d,c);0<h;)if(0>u)u+=s*((e<<1)+3),w+=r*++e;else if(0>w)u+=s*((e<<1)+3)-t*(h-1),q=e,w+=r*++e-p*((h--<<1)-3),this._mkArcDiv(q,h,n,a,f,b,x,y,v),n=h;else if(w-=p*((h<<1)-3),u-=t*--h,h&&(x[h]!=x[h-1]||y[h]!=y[h-1]))this._mkArcDiv(e,h,n,a,f,
b,x,y,v),n=h;this._mkArcDiv(e,0,n,a,f,b,x,y,v);b>>16&&(v>>16?(c=g<=f||c>f?a-e:a,this._mkDiv(c,f,e+a-c+(b&65535),1)):v&1&&c>f&&this._mkDiv(a-e,f,e,1))};this.fillPolygon=function(a,f){var b,e,c,d,k,l,h,q,n,p=a.length;if(p){e=f[0];c=f[0];for(b=1;b<p;b++)f[b]<e&&(e=f[b]),f[b]>c&&(c=f[b]);for(;e<=c;e++){var t=[];for(b=n=0;b<p;b++){b?(d=b-1,q=b):(d=p-1,q=0);k=f[d];h=f[q];if(k<h)d=a[d],l=a[q];else if(k>h)h=f[d],k=f[q],l=a[d],d=a[q];else continue;e>=k&&e<h?t[n++]=Math.round((e-k)*(l-d)/(h-k)+d):e==c&&(e>
k&&e<=h)&&(t[n++]=Math.round((e-k)*(l-d)/(h-k)+d))}t.sort(_CompInt);for(b=0;b<n;b+=2)this._mkDiv(t[b],e,t[b+1]-t[b]+1,1)}}};this.drawString=function(a,f,b){this.htm+='\x3cdiv style\x3d"position:absolute;white-space:nowrap;left:'+f+"px;top:"+b+"px;font-family:"+this.ftFam+";font-size:"+this.ftSz+";color:"+this.color+";"+this.ftSty+'"\x3e'+a+"\x3c/div\x3e"};this.drawStringRect=function(a,f,b,e,c){this.htm+='\x3cdiv style\x3d"position:absolute;overflow:hidden;left:'+f+"px;top:"+b+"px;width:"+e+"px;text-align:"+
c+";font-family:"+this.ftFam+";font-size:"+this.ftSz+";color:"+this.color+";"+this.ftSty+'"\x3e'+a+"\x3c/div\x3e"};this.drawImage=function(a,f,b,e,c,d){this.htm+='\x3cdiv style\x3d"position:absolute;left:'+f+"px;top:"+b+"px;"+(e?"width:"+e+"px;":"")+(c?"height:"+c+"px;":"")+'"\x3e\x3cimg src\x3d"'+a+'"'+(e?' width\x3d"'+e+'"':"")+(c?' height\x3d"'+c+'"':"")+(d?" "+d:"")+"\x3e\x3c/div\x3e"};this.clear=function(){this.htm="";this.cnv&&(this.cnv.innerHTML="")};this._mkOvQds=function(a,f,b,c,d,m,k,l){var h=
a-b;a=a+b+k-d;b=f-c;f=f+c+l-m;a>h+d?(this._mkDiv(a,b,d,m),this._mkDiv(a,f,d,m)):d=a-h+d;this._mkDiv(h,b,d,m);this._mkDiv(h,f,d,m)};this._mkArcDiv=function(a,c,b,e,d,m,k,l,h){var q=e+a+(m&65535);b-=c;var n,p;b||(b=1);a=e-a;h&16711680?(e=d-c-b,h&255?(h&2&&(n=Math.max(a,l[c]),p=q-n,0<p&&this._mkDiv(n,e,p,b)),h&1&&(p=Math.min(q,k[c]),p-=a,0<p&&this._mkDiv(a,e,p,b))):this._mkDiv(a,e,q-a,b),e=d+c+(m>>16),h&65280?(h&256&&(n=Math.max(a,k[c]),p=q-n,0<p&&this._mkDiv(n,e,p,b)),h&512&&(p=Math.min(q,l[c]),p-=
a,0<p&&this._mkDiv(a,e,p,b))):this._mkDiv(a,e,q-a,b)):(h&255&&(n=h&2?Math.max(a,l[c]):a,p=h&1?Math.min(q,k[c]):q,p-=n,0<p&&this._mkDiv(n,d-c-b,p,b)),h&65280&&(n=h&256?Math.max(a,k[c]):a,p=h&512?Math.min(q,l[c]):q,p-=n,0<p&&this._mkDiv(n,d+c+(m>>16),p,b)))};this.setStroke(1);this.setFont("verdana,geneva,helvetica,sans-serif","12px",Font.PLAIN);this.color="#000000";this.htm="";this.wnd=c||window;jg_ok||_chkDHTM(this.wnd);jg_ok?d?(this.cont="string"==typeof d?document.all?this.wnd.document.all[d]||null:
document.getElementById?this.wnd.document.getElementById(d)||null:null:d==window.document?document.getElementsByTagName("body")[0]:d,this.cnv=this.wnd.document.createElement("div"),this.cnv.style.fontSize=0,this.cont.appendChild(this.cnv),this.paint=jg_dom?_pntCnvDom:_pntCnvIe):this.paint=_pntDoc:this.paint=_pntN;this.setPrintable(!1)}
function _mkLinVirt(d,c,a,f,b){var e=Math.abs(f-c);b=Math.abs(b-a);a=c;f=c>f?-1:1;var g;c=0;if(e>=b){var m=b<<1,k=m-(e<<1);for(g=m-e;0<e;)--e,0<g?(d[c++]=a,g+=k):g+=m,a+=f}else{m=e<<1;k=m-(b<<1);for(g=m-b;0<b;)--b,d[c++]=a,0<g?(a+=f,g+=k):g+=m}e=d.length;for(c=e-c;c;)d[e-c--]=a}function _CompInt(d,c){return d-c};